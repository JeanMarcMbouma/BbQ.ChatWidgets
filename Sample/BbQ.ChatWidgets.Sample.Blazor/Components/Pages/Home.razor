@rendermode @(new InteractiveServerRenderMode())
@page "/"
@using BbQ.ChatWidgets.Models
@using BbQ.ChatWidgets.Blazor.Components
@using Microsoft.Extensions.AI
@using Microsoft.AspNetCore.Components.Web
@inject NavigationManager NavigationManager

<PageTitle>BbQ Chat Widgets - Blazor Sample</PageTitle>

<div class="home-page">
    <div class="header">
        <h1>ðŸ’¬ BbQ.ChatWidgets Blazor Sample</h1>
        <p class="tagline">Explore all supported chat scenarios</p>
    </div>

    <div class="intro-section">
        <h2>Welcome to BbQ.ChatWidgets</h2>
        <p>
            A powerful library for building interactive chat applications with widgets, real-time streaming,
            and advanced AI interactions. This Blazor sample demonstrates feature parity with the React implementation.
        </p>

        <div class="features">
            <div class="feature">
                <span class="icon">ðŸ§©</span>
                <div>
                    <h3>13+ Widgets</h3>
                    <p>Interactive UI components (buttons, forms, sliders, etc.)</p>
                </div>
            </div>
            <div class="feature">
                <span class="icon">âš¡</span>
                <div>
                    <h3>Real-time Chat</h3>
                    <p>Full conversation history with widget support</p>
                </div>
            </div>
            <div class="feature">
                <span class="icon">ðŸŽ¯</span>
                <div>
                    <h3>Multi-Scenario</h3>
                    <p>Widget demo, basic chat, streaming responses</p>
                </div>
            </div>
            <div class="feature">
                <span class="icon">ðŸ”’</span>
                <div>
                    <h3>Type-Safe</h3>
                    <p>Full C# integration with automatic serialization</p>
                </div>
            </div>
        </div>
    </div>

    <div class="scenarios-section">
        <h2>Explore Scenarios</h2>
        <p class="section-intro">
            Each scenario demonstrates a different aspect of BbQ.ChatWidgets functionality.
        </p>

        <div class="scenarios-grid">
            <ScenarioCard 
                Title="Widget Showcase" 
                Description="See all available widgets in action"
                Icon="â—"
                OnClick="@(EventCallback.Factory.Create(this, () => SelectScenario("widgets")))" />
            
            <ScenarioCard 
                Title="Extensible Form Demo" 
                Description="Forms with any widget type and validation"
                Icon="ðŸ“‹"
                OnClick="@(EventCallback.Factory.Create(this, () => SelectScenario("extensible-form")))" />
            
            <ScenarioCard 
                Title="Basic Chat" 
                Description="Simple conversation with AI responses"
                Icon="âœ“"
                OnClick="@(EventCallback.Factory.Create(this, () => SelectScenario("basic")))" />
            
            <ScenarioCard 
                Title="Streaming Chat" 
                Description="Real-time streaming responses"
                Icon="Â»"
                OnClick="@(EventCallback.Factory.Create(this, () => SelectScenario("streaming")))" />

            <ScenarioCard 
                Title="Triage Agent" 
                Description="Automatic message classification and routing"
                Icon="ðŸŽ¯"
                OnClick="@(EventCallback.Factory.Create(this, () => SelectScenario("triage")))" />

            <ScenarioCard 
                Title="SSE Widget Updates" 
                Description="Subscribe/publish widget updates over SSE"
                Icon="ðŸ“¡"
                OnClick="@(EventCallback.Factory.Create(this, () => SelectScenario("sse-widgets")))" />

            <ScenarioCard 
                Title="SSE Clock" 
                Description="Live clock updates pushed from server"
                Icon="â°"
                OnClick="@(EventCallback.Factory.Create(this, () => SelectScenario("sse-clock")))" />
            
            <ScenarioCard 
                Title="Widget Demo Catalog" 
                Description="Browse and learn about all widgets"
                Icon="â‰¡"
                OnClick="@(EventCallback.Factory.Create(this, () => SelectScenario("catalog")))" />
        </div>
    </div>

    <div class="documentation-section">
        <h2>ðŸ“š Resources</h2>
        <div class="docs-grid">
            <div class="doc-card">
                <h3>Getting Started</h3>
                <p>Learn the basics of BbQ.ChatWidgets in 5 minutes</p>
                <a href="https://github.com" target="_blank">View Guide â†’</a>
            </div>
            <div class="doc-card">
                <h3>API Reference</h3>
                <p>Complete API documentation for all endpoints</p>
                <a href="https://github.com" target="_blank">View API â†’</a>
            </div>
            <div class="doc-card">
                <h3>Widget Catalog</h3>
                <p>All available widgets with examples</p>
                <a href="https://github.com" target="_blank">Browse Widgets â†’</a>
            </div>
            <div class="doc-card">
                <h3>Source Code</h3>
                <p>Open-source on GitHub</p>
                <a href="https://github.com" target="_blank">View Repository â†’</a>
            </div>
        </div>
    </div>
</div>

@code {
    private void SelectScenario(string scenario)
    {
        Console.WriteLine($"SelectScenario called with: {scenario}");
        var url = scenario switch
        {
            "widgets" => "/widget-showcase",
            "extensible-form" => "/extensible-form-demo",
            "basic" => "/basic-chat",
            "streaming" => "/streaming-chat",
            "triage" => "/triage-agent",
            "sse-widgets" => "/sse-widgets",
            "sse-clock" => "/sse-clock",
            "catalog" => "/widget-catalog",
            _ => "/"
        };
        Console.WriteLine($"Navigating to: {url}");
        NavigationManager.NavigateTo(url);
    }
}
